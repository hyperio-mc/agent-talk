import{u as ve,o as ce,d as he,s,v as a,g as b,h as f,n as h,q as pe,r as g,k as e,w as v,y as p,f as ue,m as T,x as t,j as z,B as me,C as fe,D as F}from"./assets/lifecycle-CdkvAbTC.js";import{s as ge}from"./assets/attributes-BIPdA5Kx.js";var _e=g('<div class="success-message svelte-o2dhro"><div class="success-icon svelte-o2dhro">✅</div> <h3 class="svelte-o2dhro"> </h3> <div class="api-key-box svelte-o2dhro"><span class="api-key-label">Your API Key (save this!)</span> <code class="svelte-o2dhro"> </code> <p class="warning svelte-o2dhro">This key will only be shown once. Copy it now!</p></div> <p class="redirect-notice svelte-o2dhro">Redirecting to dashboard in 5 seconds...</p></div>'),be=g('<div class="form-group svelte-o2dhro"><label for="confirm-password" class="svelte-o2dhro">Confirm Password</label> <input type="password" id="confirm-password" placeholder="••••••••" autocomplete="new-password" required="" class="svelte-o2dhro"/></div>'),we=g('<div class="form-options svelte-o2dhro"><label class="checkbox-label svelte-o2dhro"><input type="checkbox" class="svelte-o2dhro"/> <span>Remember me</span></label> <a href="#forgot" class="forgot-link svelte-o2dhro">Forgot password?</a></div>'),ye=g('<div class="error-message svelte-o2dhro"> </div>'),ke=g('<form><div class="form-group svelte-o2dhro"><label for="email" class="svelte-o2dhro">Email</label> <input type="email" id="email" placeholder="you@example.com" autocomplete="email" required="" class="svelte-o2dhro"/></div> <div class="form-group svelte-o2dhro"><label for="password" class="svelte-o2dhro">Password</label> <input type="password" id="password" placeholder="••••••••" required="" class="svelte-o2dhro"/></div> <!> <!> <!> <button type="submit" class="btn-primary svelte-o2dhro"><!></button></form> <div class="switch-mode svelte-o2dhro"> <button type="button" class="btn-link svelte-o2dhro"> </button></div>',1),xe=g('<main class="svelte-o2dhro"><div class="login-container svelte-o2dhro"><div class="login-card svelte-o2dhro"><div class="login-header svelte-o2dhro"><a href="/" class="logo svelte-o2dhro"><strong class="svelte-o2dhro">Agent Talk</strong></a> <h1 class="svelte-o2dhro"> </h1> <p class="svelte-o2dhro"> </p></div> <!></div> <div class="login-footer svelte-o2dhro"><p class="svelte-o2dhro">By continuing, you agree to our <a href="/terms" class="svelte-o2dhro">Terms of Service</a> and <a href="/privacy" class="svelte-o2dhro">Privacy Policy</a>.</p></div></div></main>');function Pe(G,J){ve(J,!1);const C=typeof window<"u"&&window.location.hostname==="localhost"?"http://localhost:3001":"https://talk.onhyper.io";let l=p("login"),w=p(""),u=p(""),S=p(""),y=p(!1),c=p(null),m=p(null),B=p(!1);ce(()=>{const r=localStorage.getItem("auth_token");r&&L(r)});async function L(r){try{(await fetch(`${C}/api/v1/auth/me`,{headers:{Authorization:`Bearer ${r}`}})).ok?window.location.href="/dashboard.html":localStorage.removeItem("auth_token")}catch(d){console.error("Token verification failed:",d)}}async function N(){if(!e(w)||!e(u)){t(c,"Please fill in all fields");return}if(e(l)==="signup"&&e(u)!==e(S)){t(c,"Passwords do not match");return}if(e(u).length<8){t(c,"Password must be at least 8 characters");return}t(y,!0),t(c,null),t(m,null);try{const r=e(l)==="login"?"/api/v1/auth/login":"/api/v1/auth/signup",d=await fetch(`${C}${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e(w),password:e(u)})}),n=await d.json();if(!d.ok)throw new Error(n.message||n.error||"Authentication failed");localStorage.setItem("auth_token",n.token),e(l)==="signup"&&n.apiKey?(t(m,{message:"Account created successfully!",apiKey:n.apiKey.key}),setTimeout(()=>{window.location.href="/dashboard.html"},5e3)):window.location.href="/dashboard.html"}catch(r){t(c,r.message||"Authentication failed. Please try again.")}t(y,!1)}function W(){t(l,e(l)==="login"?"signup":"login"),t(c,null),t(m,null)}he();var K=xe(),Y=a(K),H=a(Y),q=a(H),E=s(a(q),2),Q=a(E),U=s(E,2),V=a(U),X=s(q,2);{var Z=r=>{var d=_e(),n=s(a(d),2),k=a(n),A=s(n,2),x=s(a(A),2),P=a(x);f(()=>{v(k,e(m).message),v(P,e(m).apiKey)}),h(r,d)},ee=r=>{var d=ke(),n=ue(d),k=a(n),A=s(a(k),2),x=s(k,2),P=s(a(x),2),j=s(x,2);{var oe=o=>{var i=be(),_=s(a(i),2);T(_,()=>e(S),I=>t(S,I)),h(o,i)};b(j,o=>{e(l)==="signup"&&o(oe)})}var D=s(j,2);{var ae=o=>{var i=we(),_=a(i),I=a(_);fe(I,()=>e(B),de=>t(B,de)),h(o,i)};b(D,o=>{e(l)==="login"&&o(ae)})}var M=s(D,2);{var se=o=>{var i=ye(),_=a(i);f(()=>v(_,`⚠️ ${e(c)??""}`)),h(o,i)};b(M,o=>{e(c)&&o(se)})}var $=s(M,2),te=a($);{var re=o=>{var i=F();f(()=>v(i,e(l)==="login"?"Signing in...":"Creating account...")),h(o,i)},le=o=>{var i=F();f(()=>v(i,e(l)==="login"?"Sign In":"Create Account")),h(o,i)};b(te,o=>{e(y)?o(re):o(le,!1)})}var ie=s(n,2),O=a(ie),R=s(O),ne=a(R);f(()=>{ge(P,"autocomplete",e(l)==="login"?"current-password":"new-password"),$.disabled=e(y),v(O,`${e(l)==="login"?"Don't have an account?":"Already have an account?"} `),v(ne,e(l)==="login"?"Sign up":"Sign in")}),T(A,()=>e(w),o=>t(w,o)),T(P,()=>e(u),o=>t(u,o)),z("submit",n,me(N)),z("click",R,W),h(r,d)};b(X,r=>{e(m)?r(Z):r(ee,!1)})}f(()=>{v(Q,e(l)==="login"?"Welcome Back":"Create Account"),v(V,e(l)==="login"?"Sign in to access your dashboard":"Get started with your API key")}),h(G,K),pe()}new Pe({target:document.getElementById("app")});
