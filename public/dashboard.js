import{E as Jt,F as Wt,P as Xt,k as e,G as Qt,x as o,H as ea,I as ta,J as aa,K as sa,L as v,M as la,N as va,O as oa,Q as ra,R as na,S as ia,T as ca,U as da,u as Mt,V as Ve,W as be,X as Ut,d as Ot,s as a,v as t,g as F,h as D,w as p,n as f,q as Nt,y as k,f as Ze,Y as ua,z as _a,r as g,Z as Lt,o as pa,j as h,A as dt,m as ut,C as ha}from"./assets/lifecycle-CdkvAbTC.js";import{t as fa,e as st,i as lt,s as $,b as _t}from"./assets/misc-BYsMofqF.js";import{s as z}from"./assets/attributes-BIPdA5Kx.js";function ba(u,c,r,n){var i=u.__style;if(i!==c){var _=fa(c);_==null?u.removeAttribute("style"):u.style.cssText=_,u.__style=c}return n}let pt=!1;function ya(u){var c=pt;try{return pt=!1,[u(),pt]}finally{pt=c}}function ht(u,c,r,n){var i=!la||(r&va)!==0,_=(r&sa)!==0,x=(r&ia)!==0,d=n,q=!0,y=()=>(q&&(q=!1,d=x?v(n):n),d),m;if(_){var Q=ca in u||da in u;m=Jt(u,c)?.set??(Q&&c in u?A=>u[c]=A:void 0)}var ee,H=!1;_?[ee,H]=ya(()=>u[c]):ee=u[c],ee===void 0&&n!==void 0&&(ee=y(),m&&(i&&Wt(),m(ee)));var Y;if(i?Y=()=>{var A=u[c];return A===void 0?y():(q=!0,A)}:Y=()=>{var A=u[c];return A!==void 0&&(d=void 0),A===void 0?d:A},i&&(r&Xt)===0)return Y;if(m){var Le=u.$$legacy;return(function(A,I){return arguments.length>0?((!i||!I||Le||H)&&m(I?Y():A),A):Y()})}var ye=!1,te=((r&oa)!==0?ra:na)(()=>(ye=!1,Y()));_&&e(te);var Ee=ta;return(function(A,I){if(arguments.length>0){const ae=I?e(te):i&&_?Qt(A):A;return o(te,ae),ye=!0,d!==void 0&&(d=ae),A}return ea&&ye||(Ee.f&aa)!==0?te.v:e(te)})}const ga={width:600,height:300,padding:40,colors:{primary:"#3b82f6",secondary:"#10b981",grid:"#e5e7eb",text:"#6b7280"}};function ft(u){const c=new Date(u),n=Math.floor((new Date().getTime()-c.getTime())/(1e3*60*60*24));if(n===0)return"Today";if(n===1)return"Yesterday";const i=c.toLocaleString("en-US",{month:"short"}),_=c.getDate();return`${i} ${_}`}function qa(u,c){const r=c.width-c.padding*2,n=c.height-c.padding*2,i=Math.max(...u.map(d=>d.calls),...u.map(d=>Math.ceil(d.characters/100)),1);return{xScale:d=>c.padding+d/Math.max(u.length-1,1)*r,yScale:d=>c.height-c.padding-d/i*n,maxValue:i,chartWidth:r,chartHeight:n}}function Rt(u,c,r,n,i=1){if(u.length===0)return"";const _=u.map((d,q)=>({x:c(q),y:r(d[n]/i)}));let x=`M ${_[0].x} ${_[0].y}`;for(let d=1;d<_.length;d++){const q=_[d-1],y=_[d],m=.3,Q=q.x+(y.x-(d>1?_[d-2].x:q.x))*m,ee=q.y,H=y.x-((d<_.length-1?_[d+1].x:y.x)-q.x)*m,Y=y.y;x+=` C ${Q} ${ee} ${H} ${Y} ${y.x} ${y.y}`}return x}function ma(u,c,r,n,i,_=1){if(u.length===0)return"";const x=Rt(u,c,r,i,_),d=c(u.length-1),q=c(0),y=n.height-n.padding;return`${x} L ${d} ${y} L ${q} ${y} Z`}function ka(u,c,r=5){const n=c.height-c.padding*2,i=[];for(let _=0;_<=r;_++){const x=Math.round(u/r*_),d=c.height-c.padding-_/r*n;i.push({value:x,label:x.toString(),y:d})}return i}function wa(u){if(u.length===0)return{totalCalls:0,totalCharacters:0,avgCallsPerDay:0,peakDay:null};const c=u.reduce((_,x)=>_+x.calls,0),r=u.reduce((_,x)=>_+x.characters,0),n=c/u.length,i=u.reduce((_,x)=>x.calls>_.calls?x:_,u[0]);return{totalCalls:c,totalCharacters:r,avgCallsPerDay:n,peakDay:i}}var xa=g('<div class="empty-state svelte-1vzk3he"><p class="svelte-1vzk3he">No usage data yet</p> <p class="hint svelte-1vzk3he">Make your first API call to see usage here</p></div>'),Pa=Lt('<line stroke-dasharray="4,4"></line><text text-anchor="end" font-size="12" dominant-baseline="middle"> </text>',1),Aa=Lt('<circle r="4"></circle>'),Sa=Lt('<text text-anchor="middle" font-size="11"> </text>'),Ca=g('<div class="stat svelte-1vzk3he"><span class="stat-value svelte-1vzk3he"> </span> <span class="stat-label svelte-1vzk3he"> </span></div>'),Ia=g('<div class="chart-container svelte-1vzk3he"><svg class="chart-svg svelte-1vzk3he"><!><path fill-opacity="0.1"></path><path fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><!><!></svg></div> <div class="chart-stats svelte-1vzk3he"><div class="stat svelte-1vzk3he"><span class="stat-value svelte-1vzk3he"> </span> <span class="stat-label svelte-1vzk3he">Total Calls</span></div> <div class="stat svelte-1vzk3he"><span class="stat-value svelte-1vzk3he"> </span> <span class="stat-label svelte-1vzk3he">Characters</span></div> <div class="stat svelte-1vzk3he"><span class="stat-value svelte-1vzk3he"> </span> <span class="stat-label svelte-1vzk3he">Avg/Day</span></div> <!></div>',1),Ta=g('<div class="usage-chart svelte-1vzk3he"><div class="chart-header svelte-1vzk3he"><h3 class="svelte-1vzk3he">Usage Overview</h3> <div class="period-label svelte-1vzk3he"> </div></div> <!></div>');function Et(u,c){Mt(c,!1);const r=k(),n=k(),i=k(),_=k(),x=k(),d=k();let q=ht(c,"data",24,()=>[]),y=ht(c,"days",8,7),m=ht(c,"width",8,600),Q=ht(c,"height",8,300);function ee(I){return I>=1e6?(I/1e6).toFixed(1)+"M":I>=1e3?(I/1e3).toFixed(1)+"K":I.toString()}Ve(()=>(be(m()),be(Q())),()=>{o(r,{...ga,width:m(),height:Q()})}),Ve(()=>(be(q()),e(r)),()=>{o(n,qa(q(),e(r)))}),Ve(()=>(e(n),e(r)),()=>{o(i,ka(e(n).maxValue,e(r),4))}),Ve(()=>(be(q()),e(n)),()=>{o(_,Rt(q(),e(n).xScale,e(n).yScale,"calls"))}),Ve(()=>(be(q()),e(n),e(r)),()=>{o(x,ma(q(),e(n).xScale,e(n).yScale,e(r),"calls"))}),Ve(()=>be(q()),()=>{o(d,wa(q()))}),Ut(),Ot();var H=Ta(),Y=t(H),Le=a(t(Y),2),ye=t(Le),te=a(Y,2);{var Ee=I=>{var ae=xa();f(I,ae)},A=I=>{var ae=Ia(),$e=Ze(ae),Ae=t($e),Me=t(Ae);st(Me,1,()=>e(i),lt,(S,T)=>{var G=Pa(),E=Ze(G),ne=a(E),Ce=t(ne);D(()=>{z(E,"x1",(e(r),v(()=>e(r).padding))),z(E,"y1",(e(T),v(()=>e(T).y))),z(E,"x2",(be(m()),e(r),v(()=>m()-e(r).padding))),z(E,"y2",(e(T),v(()=>e(T).y))),z(E,"stroke",(e(r),v(()=>e(r).colors.grid))),z(ne,"x",(e(r),v(()=>e(r).padding-10))),z(ne,"y",(e(T),v(()=>e(T).y))),z(ne,"fill",(e(r),v(()=>e(r).colors.text))),p(Ce,(e(T),v(()=>e(T).label)))}),f(S,G)});var Ue=a(Me),Se=a(Ue),le=a(Se);st(le,1,q,lt,(S,T,G)=>{var E=Aa();D((ne,Ce)=>{z(E,"cx",ne),z(E,"cy",Ce),z(E,"fill",(e(r),v(()=>e(r).colors.primary)))},[()=>(e(n),v(()=>e(n).xScale(G))),()=>(e(n),e(T),v(()=>e(n).yScale(e(T).calls)))]),f(S,E)});var bt=a(le);st(bt,1,q,lt,(S,T,G)=>{var E=ua(),ne=Ze(E);{var Ce=et=>{var Oe=Sa(),kt=t(Oe);D((wt,xt)=>{z(Oe,"x",wt),z(Oe,"y",Q()-10),z(Oe,"fill",(e(r),v(()=>e(r).colors.text))),p(kt,xt)},[()=>(e(n),v(()=>e(n).xScale(G))),()=>(be(ft),e(T),v(()=>ft(e(T).date)))]),f(et,Oe)},Qe=_a(()=>(be(q()),v(()=>q().length<=7||G%Math.ceil(q().length/7)===0)));F(ne,et=>{e(Qe)&&et(Ce)})}f(S,E)});var yt=a($e,2),Je=t(yt),gt=t(Je),We=t(gt),vt=a(Je,2),qt=t(vt),mt=t(qt),ot=a(vt,2),rt=t(ot),nt=t(rt),ge=a(ot,2);{var Xe=S=>{var T=Ca(),G=t(T),E=t(G),ne=a(G,2),Ce=t(ne);D(Qe=>{p(E,(e(d),v(()=>e(d).peakDay.calls))),p(Ce,`Peak (${Qe??""})`)},[()=>(be(ft),e(d),v(()=>ft(e(d).peakDay.date)))]),f(S,T)};F(ge,S=>{e(d),v(()=>e(d).peakDay)&&S(Xe)})}D((S,T,G)=>{z(Ae,"viewBox",`0 0 ${m()??""} ${Q()??""}`),z(Ue,"d",e(x)),z(Ue,"fill",(e(r),v(()=>e(r).colors.primary))),z(Se,"d",e(_)),z(Se,"stroke",(e(r),v(()=>e(r).colors.primary))),p(We,S),p(mt,T),p(nt,G)},[()=>(e(d),v(()=>ee(e(d).totalCalls))),()=>(e(d),v(()=>ee(e(d).totalCharacters))),()=>(e(d),v(()=>e(d).avgCallsPerDay.toFixed(1)))]),f(I,ae)};F(te,I=>{be(q()),v(()=>q().length===0)?I(Ee):I(A,!1)})}D(()=>p(ye,`Last ${y()??""} days`)),f(u,H),Nt()}var Da=g('<div class="loading svelte-1q5o2lv"><div class="spinner svelte-1q5o2lv"></div> <p>Loading dashboard...</p></div>'),za=g('<div class="error svelte-1q5o2lv"><h2 class="svelte-1q5o2lv">Error</h2> <p> </p> <button class="svelte-1q5o2lv">Retry</button></div>'),Ka=g('<div class="not-authenticated svelte-1q5o2lv"><h2 class="svelte-1q5o2lv">Please log in</h2> <p>You need to be logged in to view the dashboard.</p> <a href="/login.html" class="btn-primary svelte-1q5o2lv">Go to Login</a></div>'),La=g('<nav class="mobile-nav svelte-1q5o2lv"><button>Overview</button> <button>API Keys</button> <button>Usage</button> <button>Voices</button> <button>Settings</button> <button class="btn-logout-mobile svelte-1q5o2lv"> </button></nav>'),Ea=g('<div class="empty-chart svelte-1q5o2lv"><p>No usage data yet</p> <p class="hint svelte-1q5o2lv">Make your first API call to see usage here</p></div>'),Ma=g('<section class="overview-section"><h1 class="svelte-1q5o2lv">Welcome back!</h1> <p class="subtitle svelte-1q5o2lv">Your Agent Talk usage at a glance</p> <div class="stats-grid svelte-1q5o2lv"><div class="stat-card svelte-1q5o2lv"><div class="stat-icon svelte-1q5o2lv">ðŸ“ž</div> <div class="stat-content svelte-1q5o2lv"><span class="stat-value svelte-1q5o2lv"> </span> <span class="stat-label svelte-1q5o2lv">Calls Today</span></div></div> <div class="stat-card svelte-1q5o2lv"><div class="stat-icon svelte-1q5o2lv">ðŸ“Š</div> <div class="stat-content svelte-1q5o2lv"><span class="stat-value svelte-1q5o2lv"> </span> <span class="stat-label svelte-1q5o2lv">This Month</span></div></div> <div class="stat-card svelte-1q5o2lv"><div class="stat-icon svelte-1q5o2lv">ðŸ”¤</div> <div class="stat-content svelte-1q5o2lv"><span class="stat-value svelte-1q5o2lv"> </span> <span class="stat-label svelte-1q5o2lv">Characters</span></div></div> <div class="stat-card svelte-1q5o2lv"><div class="stat-icon svelte-1q5o2lv">ðŸ”‘</div> <div class="stat-content svelte-1q5o2lv"><span class="stat-value svelte-1q5o2lv"> </span> <span class="stat-label svelte-1q5o2lv">API Keys</span></div></div></div> <div class="chart-section svelte-1q5o2lv"><div class="chart-header svelte-1q5o2lv"><h2 class="svelte-1q5o2lv">Usage Over Time</h2> <div class="period-selector svelte-1q5o2lv"><button>7 Days</button> <button>30 Days</button> <button>90 Days</button></div></div> <!></div> <div class="actions-row svelte-1q5o2lv"><div class="tier-info svelte-1q5o2lv"><span>Current plan: <strong> </strong></span></div> <button class="btn-export svelte-1q5o2lv">ðŸ“¥ Export CSV</button></div></section>'),Ua=g('<div class="loading-keys svelte-1q5o2lv"><div class="spinner-small svelte-1q5o2lv"></div> <p>Loading keys...</p></div>'),Oa=g('<div class="empty-state svelte-1q5o2lv"><div class="empty-icon svelte-1q5o2lv">ðŸ”‘</div> <h3 class="svelte-1q5o2lv">No API Keys Yet</h3> <p>Create your first API key to start using the API</p> <button class="btn-primary svelte-1q5o2lv">Create Your First Key</button></div>'),Na=g('<span class="key-status revoked svelte-1q5o2lv">Revoked</span>'),Ra=g('<span class="key-status active svelte-1q5o2lv">Active</span>'),Ba=g('<div class="key-actions svelte-1q5o2lv"><button class="btn-revoke svelte-1q5o2lv">Revoke</button></div>'),$a=g('<div><div class="key-info"><div class="key-header svelte-1q5o2lv"><h4 class="svelte-1q5o2lv"> </h4> <!></div> <code class="key-value svelte-1q5o2lv"> </code> <div class="key-meta svelte-1q5o2lv"><span class="svelte-1q5o2lv"> </span> <span class="svelte-1q5o2lv">â€¢</span> <span class="svelte-1q5o2lv"> </span> <span class="svelte-1q5o2lv">â€¢</span> <span class="svelte-1q5o2lv"> </span></div></div> <!></div>'),Fa=g('<div class="keys-list svelte-1q5o2lv"></div>'),Ya=g('<section class="keys-section svelte-1q5o2lv"><div class="section-header svelte-1q5o2lv"><div><h2 class="svelte-1q5o2lv">API Keys</h2> <p class="subtitle svelte-1q5o2lv">Manage your API keys for authentication</p></div> <button class="btn-primary svelte-1q5o2lv">+ Create Key</button></div> <!> <div class="key-limits svelte-1q5o2lv"><p>ðŸ“‹ You have used <strong> </strong> of <strong> </strong> available API keys.</p></div></section>'),ja=g('<section class="usage-section"><h2 class="svelte-1q5o2lv">Usage History</h2> <div class="period-selector svelte-1q5o2lv"><button>7 Days</button> <button>30 Days</button> <button>90 Days</button></div> <!> <div class="usage-stats svelte-1q5o2lv"><div class="stat-item svelte-1q5o2lv"><span class="label svelte-1q5o2lv">Rate Limit</span> <span class="value svelte-1q5o2lv"> </span></div> <div class="stat-item svelte-1q5o2lv"><span class="label svelte-1q5o2lv">Total Calls</span> <span class="value svelte-1q5o2lv"> </span></div> <div class="stat-item svelte-1q5o2lv"><span class="label svelte-1q5o2lv">Total Memos</span> <span class="value svelte-1q5o2lv"> </span></div> <div class="stat-item svelte-1q5o2lv"><span class="label svelte-1q5o2lv">Total Characters</span> <span class="value svelte-1q5o2lv"> </span></div></div> <button class="btn-export svelte-1q5o2lv">ðŸ“¥ Export Usage Data (CSV)</button></section>'),Va=g('<div class="voice-item svelte-1q5o2lv"><div class="voice-rank svelte-1q5o2lv"></div> <div class="voice-info svelte-1q5o2lv"><span class="voice-name svelte-1q5o2lv"> </span> <span class="voice-id svelte-1q5o2lv"> </span></div> <div class="voice-stats svelte-1q5o2lv"><span class="voice-count svelte-1q5o2lv"> </span> <div class="voice-bar svelte-1q5o2lv"><div class="voice-bar-fill svelte-1q5o2lv"></div></div> <span class="voice-percentage svelte-1q5o2lv"> </span></div></div>'),Ha=g('<div class="voices-list svelte-1q5o2lv"></div>'),Ga=g('<div class="empty-state svelte-1q5o2lv"><div class="empty-icon svelte-1q5o2lv">ðŸŽ¤</div> <h3 class="svelte-1q5o2lv">No Voice Usage Yet</h3> <p>Make API calls to see which voices you use most</p></div>'),Za=g('<section class="voices-section"><h2 class="svelte-1q5o2lv">Voice Usage</h2> <p class="subtitle svelte-1q5o2lv">Your most-used voices</p> <!></section>'),Ja=g('<section class="settings-section svelte-1q5o2lv"><h2 class="svelte-1q5o2lv">Account Settings</h2> <div class="settings-card svelte-1q5o2lv"><h3 class="svelte-1q5o2lv">Account Information</h3> <div class="info-grid svelte-1q5o2lv"><div class="info-item svelte-1q5o2lv"><span class="info-label svelte-1q5o2lv">Email</span> <span class="svelte-1q5o2lv"> </span></div> <div class="info-item svelte-1q5o2lv"><span class="info-label svelte-1q5o2lv">Plan</span> <span class="tier-badge svelte-1q5o2lv"> </span></div> <div class="info-item svelte-1q5o2lv"><span class="info-label svelte-1q5o2lv">Role</span> <span class="svelte-1q5o2lv"> </span></div> <div class="info-item svelte-1q5o2lv"><span class="info-label svelte-1q5o2lv">Member Since</span> <span class="svelte-1q5o2lv"> </span></div></div></div> <div class="settings-card svelte-1q5o2lv"><h3 class="svelte-1q5o2lv">Security</h3> <div class="security-actions svelte-1q5o2lv"><div class="security-item svelte-1q5o2lv"><div><h4 class="svelte-1q5o2lv">Password</h4> <p class="svelte-1q5o2lv">Change your account password</p></div> <button class="btn-secondary svelte-1q5o2lv">Change Password</button></div> <div class="security-item svelte-1q5o2lv"><div><h4 class="svelte-1q5o2lv">API Keys</h4> <p class="svelte-1q5o2lv">Manage your API keys for authentication</p></div> <button class="btn-secondary svelte-1q5o2lv">Manage Keys</button></div></div></div> <div class="settings-card svelte-1q5o2lv"><h3 class="svelte-1q5o2lv">Danger Zone</h3> <div class="danger-actions svelte-1q5o2lv"><div class="danger-item svelte-1q5o2lv"><div><h4 class="svelte-1q5o2lv">Delete Account</h4> <p class="svelte-1q5o2lv">Permanently delete your account and all data</p></div> <button class="btn-danger svelte-1q5o2lv" disabled="">Delete Account</button></div></div></div></section>'),Wa=g('<header class="svelte-1q5o2lv"><div class="header-content svelte-1q5o2lv"><a href="/" class="logo svelte-1q5o2lv"><strong class="svelte-1q5o2lv">Agent Talk</strong> <span class="badge svelte-1q5o2lv"> </span></a> <button class="mobile-menu-btn svelte-1q5o2lv" aria-label="Toggle menu"><span class="hamburger svelte-1q5o2lv"></span></button> <nav class="desktop-nav svelte-1q5o2lv"><button>Overview</button> <button>API Keys</button> <button>Usage</button> <button>Voices</button> <button>Settings</button></nav> <div class="user-menu svelte-1q5o2lv"><span class="user-email svelte-1q5o2lv"> </span> <button class="btn-logout svelte-1q5o2lv">Logout</button></div></div> <!></header> <div class="dashboard svelte-1q5o2lv"><!></div> <footer class="svelte-1q5o2lv"><div class="footer-content svelte-1q5o2lv"><p class="svelte-1q5o2lv">Agent Talk â€” Text-to-speech API for AI agents</p> <a href="mailto:support@onhyper.io" class="svelte-1q5o2lv">Support</a></div></footer>',1),Xa=g(`<div class="modal-success svelte-1q5o2lv"><div class="success-icon svelte-1q5o2lv">ðŸ”‘</div> <h3 class="svelte-1q5o2lv">API Key Created!</h3> <p>Copy your key now. It won't be shown again.</p> <div class="created-key-box svelte-1q5o2lv"><code class="svelte-1q5o2lv"> </code> <button class="btn-copy svelte-1q5o2lv">Copy</button></div> <button class="btn-primary svelte-1q5o2lv">Done</button></div>`),Qa=g('<div class="error-message svelte-1q5o2lv"> </div>'),es=g('<h3 class="svelte-1q5o2lv">Create API Key</h3> <div class="modal-form svelte-1q5o2lv"><div class="form-group svelte-1q5o2lv"><label for="key-name" class="svelte-1q5o2lv">Name (optional)</label> <input type="text" id="key-name" placeholder="My API Key" maxlength="100" class="svelte-1q5o2lv"/> <span class="hint svelte-1q5o2lv">Give your key a descriptive name</span></div> <div class="form-group svelte-1q5o2lv"><label class="checkbox-label svelte-1q5o2lv"><input type="checkbox" class="svelte-1q5o2lv"/> <span>Test key (for development)</span></label></div> <!> <div class="modal-actions svelte-1q5o2lv"><button class="btn-secondary svelte-1q5o2lv">Cancel</button> <button class="btn-primary svelte-1q5o2lv"> </button></div></div>',1),ts=g('<div class="modal-overlay svelte-1q5o2lv" role="button" tabindex="0"><div class="modal svelte-1q5o2lv" role="dialog" aria-modal="true" tabindex="-1"><!></div></div>'),as=g('<div class="error-message svelte-1q5o2lv"> </div>'),ss=g('<div class="success-message svelte-1q5o2lv"> </div>'),ls=g('<div class="modal-overlay svelte-1q5o2lv" role="button" tabindex="0"><div class="modal svelte-1q5o2lv" role="dialog" aria-modal="true" tabindex="-1"><h3 class="svelte-1q5o2lv">Change Password</h3> <div class="modal-form svelte-1q5o2lv"><div class="form-group svelte-1q5o2lv"><label for="current-password" class="svelte-1q5o2lv">Current Password</label> <input type="password" id="current-password" placeholder="Enter current password" class="svelte-1q5o2lv"/></div> <div class="form-group svelte-1q5o2lv"><label for="new-password" class="svelte-1q5o2lv">New Password</label> <input type="password" id="new-password" placeholder="Enter new password" class="svelte-1q5o2lv"/></div> <div class="form-group svelte-1q5o2lv"><label for="confirm-password" class="svelte-1q5o2lv">Confirm New Password</label> <input type="password" id="confirm-password" placeholder="Confirm new password" class="svelte-1q5o2lv"/></div> <!> <!> <div class="modal-actions svelte-1q5o2lv"><button class="btn-secondary svelte-1q5o2lv">Cancel</button> <button class="btn-primary svelte-1q5o2lv"> </button></div></div></div></div>'),vs=g("<main><!></main> <!> <!>",1);function os(u,c){Mt(c,!1);const r=typeof window<"u"&&window.location.hostname==="localhost"?"http://localhost:3001":"https://talk.onhyper.io";let n=k(null),i=k(null),_=k([]),x=k([]),d=k(!0),q=k(null),y=k(7),m=k("overview"),Q=k([]),ee=k(!1),H=k(!1),Y=k(""),Le=k(!1),ye=k(!1),te=k(null),Ee=k(null),A=k(!1),I=k(""),ae=k(""),$e=k(""),Ae=k(null),Me=k(null),Ue=k(!1),Se=k(!1);function le(){const s=new URLSearchParams(window.location.search).get("token");return s?(localStorage.setItem("auth_token",s),window.history.replaceState({},"",window.location.pathname),s):localStorage.getItem("auth_token")}async function bt(){const l=le();if(!l){window.location.href="/login.html";return}try{const s=await fetch(`${r}/api/v1/dashboard/account`,{headers:{Authorization:`Bearer ${l}`}});if(!s.ok){if(s.status===401){localStorage.removeItem("auth_token"),window.location.href="/login.html";return}throw new Error("Failed to fetch account")}const b=await s.json();o(n,b.account)}catch(s){o(q,s.message)}}async function yt(){const l=le();if(l)try{const s=await fetch(`${r}/api/v1/dashboard/stats`,{headers:{Authorization:`Bearer ${l}`}});if(s.ok){const b=await s.json();o(i,b.stats)}}catch(s){console.error("Failed to fetch stats:",s)}}async function Je(){const l=le();if(l)try{const s=await fetch(`${r}/api/v1/analytics/charts?days=${e(y)}`,{headers:{Authorization:`Bearer ${l}`}});if(s.ok){const b=await s.json();o(_,b.data.daily||[])}}catch(s){console.error("Failed to fetch usage data:",s)}}async function gt(){const l=le();if(l)try{const s=await fetch(`${r}/api/v1/analytics/voices`,{headers:{Authorization:`Bearer ${l}`}});if(s.ok){const b=await s.json();o(x,b.data||[])}}catch(s){console.error("Failed to fetch voice popularity:",s)}}async function We(){const l=le();if(l){o(ee,!0);try{const s=await fetch(`${r}/api/v1/dashboard/keys`,{headers:{Authorization:`Bearer ${l}`}});if(s.ok){const b=await s.json();o(Q,b.keys||[])}}catch(s){console.error("Failed to fetch API keys:",s)}o(ee,!1)}}async function vt(){const l=le();if(l){o(ye,!0),o(Ee,null);try{const s=await fetch(`${r}/api/v1/dashboard/keys`,{method:"POST",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:JSON.stringify({name:e(Y)||"API Key",test:e(Le)})}),b=await s.json();if(!s.ok)throw new Error(b.message||b.error||"Failed to create key");o(te,b.key),await We(),o(Y,""),o(Le,!1)}catch(s){o(Ee,s.message)}o(ye,!1)}}async function qt(l){if(!confirm("Are you sure you want to revoke this key? This action cannot be undone."))return;const s=le();if(s)try{(await fetch(`${r}/api/v1/dashboard/keys/${l}`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`}})).ok&&await We()}catch(b){console.error("Failed to revoke key:",b)}}function mt(l){navigator.clipboard.writeText(l)}async function ot(){if(e(ae)!==e($e)){o(Ae,"Passwords do not match");return}if(e(ae).length<8){o(Ae,"Password must be at least 8 characters");return}const l=le();if(l){o(Ue,!0),o(Ae,null),o(Me,null);try{const s=await fetch(`${r}/api/v1/auth/change-password`,{method:"POST",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:JSON.stringify({currentPassword:e(I),newPassword:e(ae)})}),b=await s.json();if(!s.ok)throw new Error(b.message||b.error||"Failed to change password");o(Me,"Password changed successfully"),o(I,""),o(ae,""),o($e,""),setTimeout(()=>{o(A,!1),o(Me,null)},2e3)}catch(s){o(Ae,s.message)}o(Ue,!1)}}async function rt(){const l=le();if(l)try{const s=await fetch(`${r}/api/v1/analytics/export?days=${e(y)}`,{headers:{Authorization:`Bearer ${l}`}});if(s.ok){const b=await s.text(),qe=new Blob([b],{type:"text/csv"}),ie=URL.createObjectURL(qe),Ie=document.createElement("a");Ie.href=ie,Ie.download=`agent-talk-usage-${new Date().toISOString().split("T")[0]}.csv`,Ie.click(),URL.revokeObjectURL(ie)}}catch(s){console.error("Failed to export:",s)}}function nt(){const l=le();l&&fetch(`${r}/api/v1/auth/logout`,{method:"POST",headers:{Authorization:`Bearer ${l}`}}).catch(()=>{}),localStorage.removeItem("auth_token"),window.location.href="/login.html"}function ge(l){return l>=1e6?(l/1e6).toFixed(1)+"M":l>=1e3?(l/1e3).toFixed(1)+"K":l?.toString()||"0"}function Xe(l){return l?new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Never"}function S(l){o(m,l),o(Se,!1),l==="keys"&&e(Q).length===0&&We()}pa(async()=>{await bt(),e(n)&&await Promise.all([yt(),Je(),gt()]),o(d,!1)}),Ve(()=>(e(y),e(d)),()=>{e(y)&&!e(d)&&Je()}),Ut(),Ot();var T=vs(),G=Ze(T),E=t(G);{var ne=l=>{var s=Da();f(l,s)},Ce=l=>{var s=za(),b=a(t(s),2),qe=t(b),ie=a(b,2);D(()=>p(qe,e(q))),h("click",ie,()=>window.location.reload()),f(l,s)},Qe=l=>{var s=Ka();f(l,s)},et=l=>{var s=Wa(),b=Ze(s),qe=t(b),ie=t(qe),Ie=a(t(ie),2),U=t(Ie),_e=a(ie,2),me=a(_e,2),pe=t(me);let Te;var ke=a(pe,2);let De;var Fe=a(ke,2);let Ye;var Ne=a(Fe,2);let Re;var je=a(Ne,2);let w;var ze=a(me,2),se=t(ze),it=t(se),Pt=a(se,2),Bt=a(qe,2);{var $t=K=>{var O=La(),N=t(O);let Z;var j=a(N,2);let L;var R=a(j,2);let J;var C=a(R,2);let ve;var B=a(C,2);let W;var oe=a(B,2),ce=t(oe);D(()=>{Z=$(N,1,"svelte-1q5o2lv",null,Z,{active:e(m)==="overview"}),L=$(j,1,"svelte-1q5o2lv",null,L,{active:e(m)==="keys"}),J=$(R,1,"svelte-1q5o2lv",null,J,{active:e(m)==="usage"}),ve=$(C,1,"svelte-1q5o2lv",null,ve,{active:e(m)==="voices"}),W=$(B,1,"svelte-1q5o2lv",null,W,{active:e(m)==="settings"}),p(ce,`Logout (${e(n),v(()=>e(n).email)??""})`)}),h("click",N,()=>S("overview")),h("click",j,()=>S("keys")),h("click",R,()=>S("usage")),h("click",C,()=>S("voices")),h("click",B,()=>S("settings")),h("click",oe,nt),f(K,O)};F(Bt,K=>{e(Se)&&K($t)})}var Ft=a(b,2),Yt=t(Ft);{var jt=K=>{var O=Ma(),N=a(t(O),4),Z=t(N),j=a(t(Z),2),L=t(j),R=t(L),J=a(Z,2),C=a(t(J),2),ve=t(C),B=t(ve),W=a(J,2),oe=a(t(W),2),ce=t(oe),M=t(ce),X=a(W,2),he=a(t(X),2),P=t(he),re=t(P),fe=a(N,2),de=t(fe),we=a(t(de),2),ue=t(we);let Be;var Ke=a(ue,2);let He;var Ge=a(Ke,2);let tt;var At=a(de,2);{var St=xe=>{Et(xe,{get data(){return e(_)},get days(){return e(y)}})},ct=xe=>{var V=Ea();f(xe,V)};F(At,xe=>{e(_),v(()=>e(_).length>0)?xe(St):xe(ct,!1)})}var Ct=a(fe,2),at=t(Ct),It=t(at),Tt=a(t(It)),Dt=t(Tt),zt=a(at,2);D((xe,V,Pe)=>{p(R,xe),p(B,V),p(M,Pe),p(re,`${e(i),v(()=>e(i)?.apiKeys?.active||0)??""}/${e(i),v(()=>e(i)?.apiKeys?.maxAllowed||5)??""}`),Be=$(ue,1,"svelte-1q5o2lv",null,Be,{active:e(y)===7}),He=$(Ke,1,"svelte-1q5o2lv",null,He,{active:e(y)===30}),tt=$(Ge,1,"svelte-1q5o2lv",null,tt,{active:e(y)===90}),p(Dt,(e(i),v(()=>e(i)?.tier?.displayName||"Hobby")))},[()=>(e(i),v(()=>ge(e(i)?.usage?.today||0))),()=>(e(i),v(()=>ge(e(i)?.usage?.thisMonth||0))),()=>(e(i),v(()=>ge(e(i)?.memos?.totalCharacters||0)))]),h("click",ue,()=>o(y,7)),h("click",Ke,()=>o(y,30)),h("click",Ge,()=>o(y,90)),h("click",zt,rt),f(K,O)},Vt=K=>{var O=Ya(),N=t(O),Z=a(t(N),2),j=a(N,2);{var L=M=>{var X=Ua();f(M,X)},R=M=>{var X=Oa(),he=a(t(X),6);h("click",he,()=>o(H,!0)),f(M,X)},J=M=>{var X=Fa();st(X,5,()=>e(Q),lt,(he,P)=>{var re=$a();let fe;var de=t(re),we=t(de),ue=t(we),Be=t(ue),Ke=a(ue,2);{var He=V=>{var Pe=Na();f(V,Pe)},Ge=V=>{var Pe=Ra();f(V,Pe)};F(Ke,V=>{e(P),v(()=>!e(P).isActive)?V(He):V(Ge,!1)})}var tt=a(we,2),At=t(tt),St=a(tt,2),ct=t(St),Ct=t(ct),at=a(ct,4),It=t(at),Tt=a(at,4),Dt=t(Tt),zt=a(de,2);{var xe=V=>{var Pe=Ba(),Kt=t(Pe);h("click",Kt,()=>qt(e(P).id)),f(V,Pe)};F(zt,V=>{e(P),v(()=>e(P).isActive)&&V(xe)})}D((V,Pe,Kt)=>{fe=$(re,1,"key-card svelte-1q5o2lv",null,fe,{revoked:!e(P).isActive}),p(Be,(e(P),v(()=>e(P).name||"Unnamed Key"))),p(At,(e(P),v(()=>e(P).maskedKey))),p(Ct,`Used ${V??""} times`),p(It,`Last used ${Pe??""}`),p(Dt,`Created ${Kt??""}`)},[()=>(e(P),v(()=>ge(e(P).usageCount))),()=>(e(P),v(()=>Xe(e(P).lastUsedAt))),()=>(e(P),v(()=>Xe(e(P).createdAt)))]),f(he,re)}),f(M,X)};F(j,M=>{e(ee)?M(L):(e(Q),v(()=>e(Q).length===0)?M(R,1):M(J,!1))})}var C=a(j,2),ve=t(C),B=a(t(ve)),W=t(B),oe=a(B,2),ce=t(oe);D(()=>{p(W,(e(i),v(()=>e(i)?.apiKeys?.active||0))),p(ce,(e(i),v(()=>e(i)?.apiKeys?.maxAllowed||5)))}),h("click",Z,()=>o(H,!0)),f(K,O)},Ht=K=>{var O=ja(),N=a(t(O),2),Z=t(N);let j;var L=a(Z,2);let R;var J=a(L,2);let C;var ve=a(N,2);Et(ve,{get data(){return e(_)},get days(){return e(y)}});var B=a(ve,2),W=t(B),oe=a(t(W),2),ce=t(oe),M=a(W,2),X=a(t(M),2),he=t(X),P=a(M,2),re=a(t(P),2),fe=t(re),de=a(P,2),we=a(t(de),2),ue=t(we),Be=a(B,2);D((Ke,He,Ge)=>{j=$(Z,1,"svelte-1q5o2lv",null,j,{active:e(y)===7}),R=$(L,1,"svelte-1q5o2lv",null,R,{active:e(y)===30}),C=$(J,1,"svelte-1q5o2lv",null,C,{active:e(y)===90}),p(ce,`${e(i),v(()=>e(i)?.rateLimit?.remaining||"unlimited")??""}/${e(i),v(()=>e(i)?.rateLimit?.limit||"unlimited")??""}`),p(he,Ke),p(fe,He),p(ue,Ge)},[()=>(e(i),v(()=>ge(e(i)?.usage?.total||0))),()=>(e(i),v(()=>ge(e(i)?.memos?.total||0))),()=>(e(i),v(()=>ge(e(i)?.memos?.totalCharacters||0)))]),h("click",Z,()=>o(y,7)),h("click",L,()=>o(y,30)),h("click",J,()=>o(y,90)),h("click",Be,rt),f(K,O)},Gt=K=>{var O=Za(),N=a(t(O),4);{var Z=L=>{var R=Ha();st(R,5,()=>e(x),lt,(J,C,ve)=>{var B=Va(),W=t(B);W.textContent=ve+1;var oe=a(W,2),ce=t(oe),M=t(ce),X=a(ce,2),he=t(X),P=a(oe,2),re=t(P),fe=t(re),de=a(re,2),we=t(de),ue=a(de,2),Be=t(ue);D(Ke=>{p(M,(e(C),v(()=>e(C).voiceName))),p(he,(e(C),v(()=>e(C).voiceId))),p(fe,`${Ke??""} calls`),ba(we,`width: ${e(C),v(()=>e(C).percentage)??""}%`),p(Be,`${e(C),v(()=>e(C).percentage)??""}%`)},[()=>(e(C),v(()=>ge(e(C).callCount)))]),f(J,B)}),f(L,R)},j=L=>{var R=Ga();f(L,R)};F(N,L=>{e(x),v(()=>e(x).length>0)?L(Z):L(j,!1)})}f(K,O)},Zt=K=>{var O=Ja(),N=a(t(O),2),Z=a(t(N),2),j=t(Z),L=a(t(j),2),R=t(L),J=a(j,2),C=a(t(J),2),ve=t(C),B=a(J,2),W=a(t(B),2),oe=t(W),ce=a(B,2),M=a(t(ce),2),X=t(M),he=a(N,2),P=a(t(he),2),re=t(P),fe=a(t(re),2),de=a(re,2),we=a(t(de),2);D(ue=>{p(R,(e(n),v(()=>e(n).email))),p(ve,(e(n),v(()=>e(n).tier))),p(oe,(e(n),v(()=>e(n).role))),p(X,ue)},[()=>(e(n),v(()=>Xe(e(n).createdAt)))]),h("click",fe,()=>o(A,!0)),h("click",we,()=>S("keys")),f(K,O)};F(Yt,K=>{e(m)==="overview"?K(jt):e(m)==="keys"?K(Vt,1):e(m)==="usage"?K(Ht,2):e(m)==="voices"?K(Gt,3):e(m)==="settings"&&K(Zt,4)})}D(()=>{p(U,(e(n),v(()=>e(n).tier))),z(_e,"aria-expanded",e(Se)),Te=$(pe,1,"svelte-1q5o2lv",null,Te,{active:e(m)==="overview"}),De=$(ke,1,"svelte-1q5o2lv",null,De,{active:e(m)==="keys"}),Ye=$(Fe,1,"svelte-1q5o2lv",null,Ye,{active:e(m)==="usage"}),Re=$(Ne,1,"svelte-1q5o2lv",null,Re,{active:e(m)==="voices"}),w=$(je,1,"svelte-1q5o2lv",null,w,{active:e(m)==="settings"}),p(it,(e(n),v(()=>e(n).email)))}),h("click",_e,()=>o(Se,!e(Se))),h("click",pe,()=>S("overview")),h("click",ke,()=>S("keys")),h("click",Fe,()=>S("usage")),h("click",Ne,()=>S("voices")),h("click",je,()=>S("settings")),h("click",Pt,nt),f(l,s)};F(E,l=>{e(d)?l(ne):e(q)?l(Ce,1):e(n)?l(et,!1):l(Qe,2)})}var Oe=a(G,2);{var kt=l=>{var s=ts(),b=t(s),qe=t(b);{var ie=U=>{var _e=Xa(),me=a(t(_e),6),pe=t(me),Te=t(pe),ke=a(pe,2),De=a(me,2);D(()=>p(Te,(e(te),v(()=>e(te).key)))),h("click",ke,()=>mt(e(te).key)),h("click",De,()=>{o(H,!1),o(te,null)}),f(U,_e)},Ie=U=>{var _e=es(),me=a(Ze(_e),2),pe=t(me),Te=a(t(pe),2),ke=a(pe,2),De=t(ke),Fe=t(De),Ye=a(ke,2);{var Ne=se=>{var it=Qa(),Pt=t(it);D(()=>p(Pt,e(Ee))),f(se,it)};F(Ye,se=>{e(Ee)&&se(Ne)})}var Re=a(Ye,2),je=t(Re),w=a(je,2),ze=t(w);D(()=>{w.disabled=e(ye),p(ze,e(ye)?"Creating...":"Create Key")}),ut(Te,()=>e(Y),se=>o(Y,se)),ha(Fe,()=>e(Le),se=>o(Le,se)),h("click",je,()=>o(H,!1)),h("click",w,vt),f(U,_e)};F(qe,U=>{e(te)?U(ie):U(Ie,!1)})}h("click",b,dt(function(U){_t.call(this,c,U)})),h("keydown",b,dt(function(U){_t.call(this,c,U)})),h("click",s,()=>o(H,!1)),h("keydown",s,U=>U.key==="Escape"&&o(H,!1)),f(l,s)};F(Oe,l=>{e(H)&&l(kt)})}var wt=a(Oe,2);{var xt=l=>{var s=ls(),b=t(s),qe=a(t(b),2),ie=t(qe),Ie=a(t(ie),2),U=a(ie,2),_e=a(t(U),2),me=a(U,2),pe=a(t(me),2),Te=a(me,2);{var ke=w=>{var ze=as(),se=t(ze);D(()=>p(se,e(Ae))),f(w,ze)};F(Te,w=>{e(Ae)&&w(ke)})}var De=a(Te,2);{var Fe=w=>{var ze=ss(),se=t(ze);D(()=>p(se,e(Me))),f(w,ze)};F(De,w=>{e(Me)&&w(Fe)})}var Ye=a(De,2),Ne=t(Ye),Re=a(Ne,2),je=t(Re);D(()=>{Re.disabled=e(Ue),p(je,e(Ue)?"Changing...":"Change Password")}),ut(Ie,()=>e(I),w=>o(I,w)),ut(_e,()=>e(ae),w=>o(ae,w)),ut(pe,()=>e($e),w=>o($e,w)),h("click",Ne,()=>o(A,!1)),h("click",Re,ot),h("click",b,dt(function(w){_t.call(this,c,w)})),h("keydown",b,dt(function(w){_t.call(this,c,w)})),h("click",s,()=>o(A,!1)),h("keydown",s,w=>w.key==="Escape"&&o(A,!1)),f(l,s)};F(wt,l=>{e(A)&&l(xt)})}f(u,T),Nt()}new os({target:document.getElementById("app")});
